(function(t){function e(e){for(var i,a,o=e[0],r=e[1],u=e[2],h=0,d=[];h<o.length;h++)a=o[h],l[a]&&d.push(l[a][0]),l[a]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);c&&c(e);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,o=1;o<n.length;o++){var r=n[o];0!==l[r]&&(i=!1)}i&&(s.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},l={0:0},s=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/vue-table-ex/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=r;s.push([0,1]),n()})({0:function(t,e,n){t.exports=n("Vtdi")},"A0++":function(t,e,n){"use strict";var i=n("BPUQ"),l=n.n(i);l.a},BPUQ:function(t,e,n){},CiO6:function(t,e){Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(t){function e(e,n,i,l){return!1===t||i<=e+l&&e<=n+l?Math.min(i,Math.max(n,e)):(n+i)/2}function n(t,e,i,l){return{left:t,top:e,width:i,height:l,right:t+i,bottom:e+l,translate:function(s,a){return n(s+t,a+e,i,l)},relativeFromTo:function(a,o){var r=t,u=e;if(a=a.offsetParent,o=o.offsetParent,a===o)return s;for(;a;a=a.offsetParent)r+=a.offsetLeft+a.clientLeft,u+=a.offsetTop+a.clientTop;for(;o;o=o.offsetParent)r-=o.offsetLeft+o.clientLeft,u-=o.offsetTop+o.clientTop;return n(r,u,i,l)}}}var i,l=this,s=n(this.offsetLeft,this.offsetTop,this.offsetWidth,this.offsetHeight);while((i=l.parentNode)instanceof HTMLElement){var a=i.offsetLeft+i.clientLeft,o=i.offsetTop+i.clientTop;s=s.relativeFromTo(l,i).translate(-a,-o),i.scrollLeft=e(i.scrollLeft,s.right-i.clientWidth,s.left,i.clientWidth),i.scrollTop=e(i.scrollTop,s.bottom-i.clientHeight,s.top,i.clientHeight),s=s.translate(a-i.scrollLeft,o-i.scrollTop),l=i}})},MfJ9:function(t,e,n){"use strict";var i=n("SApN"),l=n.n(i);l.a},SApN:function(t,e,n){},Vtdi:function(t,e,n){"use strict";n.r(e);n("yt8O"),n("VRzm");var i=n("Kw5r"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("HelloWorld")],1)},s=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("table-ex",{staticClass:"table",attrs:{"auto-focus":"",enable:t.tableEnable}},[n("thead-ex",[n("th-ex",[t._v("姓名")]),n("th-ex",[t._v("年龄")]),n("th-ex",[t._v("爱好")])],1),n("tbody-ex",t._l(t.jsonData,function(e,i){return n("tr-ex",{key:i,attrs:{valid:t.rowValid(e),"valid-tip":""}},[n("td-ex",{attrs:{list:t.list,display:"name",take:"id",edit:""},on:{change:function(n){t.onChange(e,n)}},model:{value:e.id,callback:function(n){t.$set(e,"id",n)},expression:"item.id"}}),n("td-ex",{model:{value:e.age,callback:function(n){t.$set(e,"age",n)},expression:"item.age"}}),n("td-ex",{attrs:{edit:""},model:{value:e.like,callback:function(n){t.$set(e,"like",n)},expression:"item.like"}})],1)})),n("tfoot-ex",[n("td",[t._v("合计")]),n("td"),n("td",[t._v(t._s(t.totalAge))]),n("td")])],1),n("div",{staticClass:"ctl-btn"},[n("button",{on:{click:function(e){t.tableEnable=!t.tableEnable}}},[t._v("切换表格禁用状态")])])],1)},o=[],r={data:function(){return{list:[{name:"张三",id:1,age:23},{name:"李四",id:2,age:26},{name:"王五",id:3,age:42},{name:"赵六",id:4,age:19},{name:"小明",id:5,age:18},{name:"王刚",id:6,age:27}],jsonData:[{id:1,age:23,like:"打球"},{id:null,age:null,like:null},{id:null,age:null,like:null},{id:null,age:null,like:null}],tableEnable:!0}},methods:{onChange:function(t,e){t.age=e?e.age:null},rowValid:function(t){return null!=t.id&&null!=t.like&&""!=t.like}},computed:{totalAge:function(){var t=0;return this.jsonData.map(function(e){return t+=e.age}),t}}},u=r,c=(n("MfJ9"),n("KHd+")),h=Object(c["a"])(u,a,o,!1,null,null,null),d=h.exports,f={name:"app",components:{HelloWorld:d}},p=f,m=(n("A0++"),Object(c["a"])(p,l,s,!1,null,null,null)),b=m.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("td",{staticClass:"td-ex"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"input",attrs:{readonly:!t.edit||!t.enable},domProps:{value:t.value},on:{keydown:t.keydown,focus:t.focus,blur:t.blur,input:[function(e){e.target.composing||(t.value=e.target.value)},t.input]}}),t.enable&&t.showDrawdown?n("div",{staticClass:"drawdown-icon",on:{mousedown:t.drawdownClick}},[n("i")]):t._e(),t.showList?n("ul",t._l(t.searchList,function(e,i){return n("li",{key:i,class:{selected:e==t.selectedItem},on:{mousedown:function(n){t.itemClick(e)}}},[t._v(t._s(t.displayValue(e)))])})):t._e()])},x=[],w=(n("dRSK"),n("CiO6"),{name:"TdEx",model:{prop:"bindValue",event:"update:bindValue"},props:{bindValue:{default:""},list:Array,display:String,take:String,edit:Boolean},data:function(){return{showList:!1,showListTimeout:null,showDrawdown:this.$props.list,value:"",selectedItem:null,readonly:!0,enable:!1}},mounted:function(){var t=this;if(this.$watch(function(t){return t.$parent.enable},function(e){return t.enable=e}),this.list){var e=this.list.find(function(e){return t.takeValue(e)==t.bindValue});e&&this.itemClick(e)}else this.value=this.bindValue},methods:{drawdownClick:function(){var t=this;this.showList=!this.showList,this.$nextTick(function(){return t.$refs.input.focus()})},focus:function(t){this.$nextTick(function(){t.target.select()})},setFocus:function(){this.$refs.input.focus()},blur:function(){var t=this;if(this.list){this.showListTimeout=setTimeout(function(){t.showList=!1},100);var e=this.list.find(function(e){return t.displayValue(e)==t.value});e||(this.value="",this.$emit("update:bindValue",null),this.$nextTick(function(){return t.$emit("change",null)}))}},displayValue:function(t){return this.list&&this.display?t[this.display]:t},takeValue:function(t){return this.list&&this.take?t[this.take]:t},itemClick:function(t){var e=this;this.$emit("update:bindValue",this.takeValue(t)),this.value=this.displayValue(t),this.selectedItem=t,this.$nextTick(function(){return e.$emit("change",e.selectedItem)})},input:function(){var t=this;this.$nextTick(function(){t.list?t.showList=0!=t.searchList.length:t.edit&&t.$emit("update:bindValue",t.value)})},keydown:function(t){var e=this;if(this.enable)switch(t.keyCode){case 13:if(!this.list)return;this.$emit("update:bindValue",this.takeValue(this.selectedItem)),this.value=this.displayValue(this.selectedItem),this.$nextTick(function(){return e.$emit("change",e.selectedItem)}),this.showList=!1;break;case 40:if(this.list)this.arrowDownKeydown(),this.scrollIntoView();else{var n=this.$parent.$children,i=n.indexOf(this),l=this.$parent.$parent.$children,s=l.indexOf(this.$parent);if(s==l.length-1)return;l[s+1].enable&&l[s+1].$children[i].setFocus()}break;case 38:if(this.list)this.arrowUpKeydown(),this.scrollIntoView();else{n=this.$parent.$children;var a=n.indexOf(this);l=this.$parent.$parent.$children,s=l.indexOf(this.$parent);if(0==s)return;l[s-1].enable&&l[s-1].$children[a].setFocus()}break;case 37:this.arrowLeftKeydown();break;case 39:this.arrowRightKeydown();break;default:break}},arrowDownKeydown:function(){if(0!=this.searchList.length){var t=this.searchList.indexOf(this.selectedItem);if(!this.showList)return this.showList=!0,void(-1==t&&(this.selectedItem=this.searchList[0]));t==this.searchList.length-1?t=0:t+=1,this.selectedItem=this.searchList[t]}},arrowUpKeydown:function(){if(0!=this.searchList.length&&this.showList){var t=this.searchList.indexOf(this.selectedItem);0==t?t=this.searchList.length-1:t-=1,this.selectedItem=this.searchList[t]}},arrowLeftKeydown:function(){var t=this.$parent.$children,e=t.indexOf(this);0!=e&&t[e-1].setFocus()},arrowRightKeydown:function(){var t=this.$parent.$children,e=t.indexOf(this);e!=t.length-1&&t[e+1].setFocus()},scrollIntoView:function(){this.list&&this.$nextTick(function(){var t=document.getElementsByClassName("selected").item(0);t&&t.scrollIntoViewIfNeeded()})}},computed:{searchList:function(){var t=this;if(this.list)return""==this.value?this.list:this.list.filter(function(e){return-1!=t.displayValue(e).indexOf(t.value)})}},watch:{showList:function(t){this.list&&(clearTimeout(this.showListTimeout),this.showListTimeout=null)},bindValue:function(t){this.list||(this.value=t)}}}),$=w,g=Object(c["a"])($,v,x,!1,null,null,null),y=g.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",{staticClass:"tr-ex"},[t.showIndex?n("td",{staticClass:"order-col"},[t._v("\n    "+t._s(t.indexValue)+"\n    "),t.valid&&t.validTip?n("i"):t._e()]):t._e(),t._t("default")],2)},k=[],V=(n("rGqo"),{name:"TrEx",props:{valid:{type:Boolean,default:!0},validTip:Boolean},data:function(){return{showIndex:this.$parent.$parent.showIndex,indexValue:"",enable:!1,tableEnable:!1,preRowValid:!1}},mounted:function(){var t=this;this.$children.forEach(function(e){return e.$on("selected",t.$emit("selected"))}),this.indexValue=this.$el.rowIndex,this.tableEnable=this.$parent.$parent.enable,this.$watch(function(t){return t.$parent.$parent.enable},function(e){return t.tableEnable=e})},updated:function(){this.indexValue=this.$el.rowIndex},methods:{setShowIndex:function(t){this.showIndex=t},setEnable:function(){var t=this;this.tableEnable?(this.$parent.$children[this.indexValue]&&(this.$parent.$children[this.indexValue].enable=this.valid,this.valid?this.$parent.$children.filter(function(e){return e.indexValue>t.indexValue&&e.valid}).forEach(function(t){return t.enable=!0}):this.$parent.$children.filter(function(e){return e.indexValue>t.indexValue}).forEach(function(t){return t.enable=!1})),1!=this.indexValue?this.$parent.$children[this.indexValue-2].valid?this.enable=!0:this.enable=this.valid:this.enable=!0):this.enable=!1}},watch:{valid:function(t){this.setEnable()},indexValue:function(t){this.setEnable()},tableEnable:function(t){this.setEnable()}}}),L=V,T=Object(c["a"])(L,_,k,!1,null,null,null),E=T.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tbody",{staticClass:"tbody-ex"},[t._t("default")],2)},O=[],C={name:"TbodyEx"},j=C,P=Object(c["a"])(j,I,O,!1,null,null,null),F=P.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",{staticClass:"thead-ex"},[n("tr",[t.showIndex?n("th",{staticClass:"order-col"},[t._v("行号")]):t._e(),t._t("default")],2)])},S=[],N={name:"TheadEx",data:function(){return{showIndex:this.$parent.showIndex}}},A=N,B=Object(c["a"])(A,K,S,!1,null,null,null),M=B.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("th",{staticClass:"th-ex"},[t._t("default")],2)},H=[],R={name:"ThEx"},W=R,J=Object(c["a"])(W,D,H,!1,null,null,null),U=J.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"table-ex"},[t._t("default")],2)},q=[],z={name:"TableEx",data:function(){return{}},props:{autoFocus:Boolean,showIndex:{type:Boolean,default:!0},enable:Boolean},mounted:function(){this.autoFocus&&this.doAutoFocus();this.$children.find(function(t){return"tbody-ex"==t.$el.className})},methods:{doAutoFocus:function(){var t=this.$children.find(function(t){return"tbody-ex"==t.$el.className});t&&t.$children[0]&&t.$children[0].$children[0]&&t.$children[0].$children[0].setFocus()}}},G=z,X=Object(c["a"])(G,Q,q,!1,null,null,null),Y=X.exports,Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tfoot",{staticClass:"tfoot-ex"},[t._t("default")],2)},tt=[],et={name:"TfootEx"},nt=et,it=Object(c["a"])(nt,Z,tt,!1,null,null,null),lt=it.exports,st={install:function(t){t.component("td-ex",y),t.component("tr-ex",E),t.component("tbody-ex",F),t.component("thead-ex",M),t.component("th-ex",U),t.component("table-ex",Y),t.component("tfoot-ex",lt)}};n("ytdn");i["a"].config.productionTip=!1,i["a"].use(st),new i["a"]({render:function(t){return t(b)}}).$mount("#app")},ytdn:function(t,e,n){}});
//# sourceMappingURL=app.4e5d9aef.js.map