(function(t){function e(e){for(var i,l,a=e[0],r=e[1],u=e[2],d=0,h=[];d<a.length;d++)l=a[d],s[l]&&h.push(s[l][0]),s[l]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);c&&c(e);while(h.length)h.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,a=1;a<n.length;a++){var r=n[a];0!==s[r]&&(i=!1)}i&&(o.splice(e--,1),t=l(l.s=n[0]))}return t}var i={},s={0:0},o=[];function l(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=t,l.c=i,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(n,i,function(e){return t[e]}.bind(null,i));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/vue-table-ex/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],r=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var c=r;o.push([0,1]),n()})({0:function(t,e,n){t.exports=n("Vtdi")},"A0++":function(t,e,n){"use strict";var i=n("BPUQ"),s=n.n(i);s.a},BPUQ:function(t,e,n){},CiO6:function(t,e){Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(t){function e(e,n,i,s){return!1===t||i<=e+s&&e<=n+s?Math.min(i,Math.max(n,e)):(n+i)/2}function n(t,e,i,s){return{left:t,top:e,width:i,height:s,right:t+i,bottom:e+s,translate:function(o,l){return n(o+t,l+e,i,s)},relativeFromTo:function(l,a){var r=t,u=e;if(l=l.offsetParent,a=a.offsetParent,l===a)return o;for(;l;l=l.offsetParent)r+=l.offsetLeft+l.clientLeft,u+=l.offsetTop+l.clientTop;for(;a;a=a.offsetParent)r-=a.offsetLeft+a.clientLeft,u-=a.offsetTop+a.clientTop;return n(r,u,i,s)}}}var i,s=this,o=n(this.offsetLeft,this.offsetTop,this.offsetWidth,this.offsetHeight);while((i=s.parentNode)instanceof HTMLElement){var l=i.offsetLeft+i.clientLeft,a=i.offsetTop+i.clientTop;o=o.relativeFromTo(s,i).translate(-l,-a),i.scrollLeft=e(i.scrollLeft,o.right-i.clientWidth,o.left,i.clientWidth),i.scrollTop=e(i.scrollTop,o.bottom-i.clientHeight,o.top,i.clientHeight),o=o.translate(l-i.scrollLeft,a-i.scrollTop),s=i}})},"Eo/v":function(t,e,n){},Ie4s:function(t,e,n){},Imuf:function(t,e,n){},K068:function(t,e,n){"use strict";var i=n("h1lh"),s=n.n(i);s.a},MfJ9:function(t,e,n){"use strict";var i=n("SApN"),s=n.n(i);s.a},OJ4k:function(t,e,n){"use strict";var i=n("oOwC"),s=n.n(i);s.a},OeT0:function(t,e,n){"use strict";var i=n("Imuf"),s=n.n(i);s.a},SApN:function(t,e,n){},Vtdi:function(t,e,n){"use strict";n.r(e);n("yt8O"),n("VRzm");var i=n("Kw5r"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("HelloWorld")],1)},o=[],l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("table-ex",{staticClass:"table",attrs:{enable:t.tableEnable,"show-index":t.showIndex}},[n("thead-ex",[n("tr",[t.showIndex?n("th",{attrs:{rowspan:"2"}},[t._v("行号")]):t._e(),n("th",{attrs:{colspan:"3"}},[t._v("基本信息")])]),n("tr",[n("th",[t._v("姓名")]),n("th",[t._v("年龄")]),n("th",[t._v("爱好")])])]),n("tbody-ex",{attrs:{"auto-focus":""}},t._l(t.jsonData,function(e,i){return n("tr-ex",{key:i,attrs:{valid:t.rowValid(e),"valid-tip":""}},[n("td-ex",{attrs:{list:t.list,display:"name",take:"id",edit:""},on:{change:function(n){t.onChange(e,n)}},model:{value:e.id,callback:function(n){t.$set(e,"id",n)},expression:"item.id"}}),n("td-ex",{model:{value:e.age,callback:function(n){t.$set(e,"age",n)},expression:"item.age"}}),n("td-ex",{attrs:{edit:""},model:{value:e.like,callback:function(n){t.$set(e,"like",n)},expression:"item.like"}})],1)})),n("tfoot-ex",{attrs:{show:!0},on:{addRow:t.addRow,delRow:t.delRow}},[t.showIndex?n("td",[t._v("合计")]):t._e(),n("td"),n("td",[t._v(t._s(t.totalAge))]),n("td")])],1),n("div",{staticClass:"ctl-btn"},[n("button",{on:{click:function(e){t.tableEnable=!t.tableEnable}}},[t._v("切换表格禁用状态")]),n("button",{on:{click:function(e){t.showIndex=!t.showIndex}}},[t._v("切换行号显示")])])],1)},a=[],r={data:function(){return{list:[{name:"张三",id:1,age:23},{name:"李四",id:2,age:26},{name:"王五",id:3,age:42},{name:"赵六",id:4,age:19},{name:"小明",id:5,age:18},{name:"王刚",id:6,age:27}],jsonData:[{id:1,age:23,like:"打球"},{id:null,age:null,like:null},{id:null,age:null,like:null},{id:null,age:null,like:null}],tableEnable:!0,showIndex:!0}},methods:{addRow:function(){this.jsonData.push({id:null,age:null,like:null})},delRow:function(t){var e=this;this.jsonData=this.jsonData.filter(function(n){return e.jsonData.indexOf(n)!=t})},onChange:function(t,e){t.age=e?e.age:null},rowValid:function(t){return null!=t.id&&null!=t.like&&""!=t.like}},computed:{totalAge:function(){var t=0;return this.jsonData.map(function(e){return t+=e.age}),t}}},u=r,c=(n("MfJ9"),n("KHd+")),d=Object(c["a"])(u,l,a,!1,null,null,null),h=d.exports,f={name:"app",components:{HelloWorld:h}},x=f,p=(n("A0++"),Object(c["a"])(x,s,o,!1,null,null,null)),b=p.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("td",{ref:"td",staticClass:"td-ex"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"input",attrs:{readonly:!t.edit||!t.tableEx.enable||!t.enable},domProps:{value:t.value},on:{keydown:t.keydown,focus:t.focus,blur:t.blur,input:[function(e){e.target.composing||(t.value=e.target.value)},t.input]}}),t.showDrawdown&&t.tableEx.enable&&t.enable?n("div",{staticClass:"drawdown-icon",on:{mousedown:t.drawdownClick}},[n("i")]):t._e(),t.showList?n("ul",t._l(t.searchList,function(e,i){return n("li",{key:i,class:{selected:e==t.selectedItem},on:{mousedown:function(n){t.itemClick(e)}}},[t._v(t._s(t.displayValue(e)))])})):t._e()])},w=[],m=(n("dRSK"),n("CiO6"),{name:"TdEx",model:{prop:"bindValue",event:"update:bindValue"},inject:{tableEx:"tableEx",tbodyEx:"tbodyEx",trEx:"trEx"},props:{bindValue:{default:""},list:Array,display:String,take:String,edit:Boolean},data:function(){return{showList:!1,showListTimeout:null,showDrawdown:this.$props.list,value:"",selectedItem:null,readonly:!0,colIndex:null}},mounted:function(){var t=this;if(this.colIndex=this.$refs.td.cellIndex,this.trEx.tdList.push(this),this.$nextTick(function(){t.tbodyEx.autoFocus&&1==t.trEx.rowIndex&&1==t.colIndex&&t.$refs.input.focus()}),this.list){var e=this.list.find(function(e){return t.takeValue(e)==t.bindValue});e&&this.itemClick(e)}else this.value=this.bindValue},beforeDestroy:function(){var t=this;this.trEx.tdList=this.trEx.tdList.filter(function(e){return e!==t})},updated:function(){this.colIndex=this.$refs.cellIndex},methods:{setFocus:function(){this.$refs.input.focus()},drawdownClick:function(){var t=this;this.showList=!this.showList,this.$nextTick(function(){return t.$refs.input.focus()})},focus:function(t){var e=this;this.$nextTick(function(){t.target.select(),e.tbodyEx.selectedRow=e.trEx})},blur:function(){var t=this;if(this.list){this.showListTimeout=setTimeout(function(){t.showList=!1},100);var e=this.list.find(function(e){return t.displayValue(e)==t.value});e||(this.value="",this.$emit("update:bindValue",null),this.$nextTick(function(){return t.$emit("change",null)}))}},displayValue:function(t){return this.list&&this.display?t[this.display]:t},takeValue:function(t){return this.list&&this.take?t[this.take]:t},itemClick:function(t){var e=this;this.$emit("update:bindValue",this.takeValue(t)),this.value=this.displayValue(t),this.selectedItem=t,this.$nextTick(function(){return e.$emit("change",e.selectedItem)})},input:function(){var t=this;this.$nextTick(function(){t.list?t.showList=0!=t.searchList.length:t.edit&&t.$emit("update:bindValue",t.value)})},keydown:function(t){var e=this;switch(t.keyCode){case 13:if(!this.list)return;this.$emit("update:bindValue",this.takeValue(this.selectedItem)),this.value=this.displayValue(this.selectedItem),this.$nextTick(function(){return e.$emit("change",e.selectedItem)}),this.showList=!1;break;case 40:if(this.list&&this.enable)this.arrowDownKeydown(),this.scrollIntoView();else{var n=this.tbodyEx.trList.indexOf(this.trEx);if(n==this.tbodyEx.trList.length-1)return;var i=this.trEx.tdList.indexOf(this);this.tbodyEx.trList[n+1].tdList[i].setFocus()}break;case 38:if(this.list&&this.enable)this.arrowUpKeydown(),this.scrollIntoView();else{var s=this.tbodyEx.trList.indexOf(this.trEx);if(0==s)return;var o=this.trEx.tdList.indexOf(this);this.tbodyEx.trList[s-1].tdList[o].setFocus()}break;case 37:this.arrowLeftKeydown();break;case 39:this.arrowRightKeydown();break;default:break}},arrowDownKeydown:function(){if(0!=this.searchList.length){var t=this.searchList.indexOf(this.selectedItem);if(!this.showList)return this.showList=!0,void(-1==t&&(this.selectedItem=this.searchList[0]));t==this.searchList.length-1?t=0:t+=1,this.selectedItem=this.searchList[t]}},arrowUpKeydown:function(){if(0!=this.searchList.length&&this.showList){var t=this.searchList.indexOf(this.selectedItem);0==t?t=this.searchList.length-1:t-=1,this.selectedItem=this.searchList[t]}},arrowLeftKeydown:function(){var t=this.trEx.tdList.indexOf(this);0!=t&&this.trEx.tdList[t-1].setFocus()},arrowRightKeydown:function(){var t=this.trEx.tdList.indexOf(this);t!=this.trEx.tdList.length-1&&this.trEx.tdList[t+1].setFocus()},scrollIntoView:function(){this.list&&this.$nextTick(function(){var t=document.getElementsByClassName("selected").item(0);t&&t.scrollIntoViewIfNeeded()})}},computed:{searchList:function(){var t=this;if(this.list)return""==this.value?this.list:this.list.filter(function(e){return-1!=t.displayValue(e).indexOf(t.value)})},enable:function(){var t=this.tbodyEx.trList.indexOf(this.trEx);if(0==t)return!0;var e=this.tbodyEx.trList[t-1];return!!e&&(e.valid&&e.tdList[0].enable)}},watch:{showList:function(t){this.list&&(clearTimeout(this.showListTimeout),this.showListTimeout=null)},bindValue:function(t){var e=this;if(this.list)if(t){var n=this.list.find(function(n){return t==e.takeValue(n)});this.value=this.displayValue(n)}else this.value="";else this.value=t}}}),E=m,y=(n("OeT0"),Object(c["a"])(E,v,w,!1,null,null,null)),L=y.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",{staticClass:"tr-ex"},[t.tableEx.showIndex?n("td",{staticClass:"order-col"},[t._v("\n    "+t._s(t.rowIndex)+"\n    "),t.valid?n("i"):t._e()]):t._e(),t._t("default")],2)},k=[],_={name:"TrEx",inject:{tableEx:"tableEx",tbodyEx:"tbodyEx"},provide:function(){return{trEx:this}},props:{valid:{type:Boolean,default:!0},validTip:Boolean},data:function(){return{rowIndex:null,tdList:[]}},mounted:function(){this.rowIndex=this.$el.rowIndex,this.tbodyEx.trList.push(this)},beforeDestroy:function(){var t=this;this.tbodyEx.trList=this.tbodyEx.trList.filter(function(e){return e!==t})},updated:function(){this.rowIndex=this.$el.rowIndex},methods:{}},I=_,T=(n("sLf9"),Object(c["a"])(I,g,k,!1,null,null,null)),$=T.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tbody",{staticClass:"tbody-ex"},[t._t("default")],2)},V=[],j={name:"TbodyEx",inject:{tableEx:"tableEx"},data:function(){return{trList:[],autoFocus:Boolean,selectedRow:null}},provide:function(){return{tbodyEx:this}},mounted:function(){this.tableEx.tbodyEx=this},computed:{selectedRowIndex:function(){return this.trList.indexOf(this.selectedRow)}}},R=j,C=Object(c["a"])(R,O,V,!1,null,null,null),S=C.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",{staticClass:"thead-ex"},[t._t("default")],2)},K=[],P={name:"TheadEx"},B=P,F=(n("K068"),Object(c["a"])(B,D,K,!1,null,null,null)),M=F.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"table-ex"},[t._t("default")],2)},A=[],H={name:"TableEx",props:{showIndex:{type:Boolean,default:!0},enable:Boolean},provide:function(){return{tableEx:this}},data:function(){return{tbodyEx:null}},watch:{selectedRowIndex:function(t){this.$emit("selectedRowIndexChange",t)}}},J=H,W=(n("u8SE"),Object(c["a"])(J,N,A,!1,null,null,null)),U=W.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tfoot",{staticClass:"tfoot-ex"},[t._t("default"),t.show&&t.tableEx.enable?n("tr",[n("td",{attrs:{colspan:t.colSpan}},[n("div",{staticClass:"ctrl-bar"},[n("a",{on:{click:function(e){t.$emit("addRow")}}},[t._v("新增 +")]),n("a",{on:{click:t.delRow}},[t._v("删除 -")]),n("span",[t._v("当前选中第："+t._s(t.selectedRowIndex+1)+" 行")])])])]):t._e()],2)},z=[],q={name:"TfootEx",inject:{tableEx:"tableEx"},props:{show:!1},computed:{colSpan:function(){if(this.tableEx.tbodyEx){var t=this.tableEx.tbodyEx.trList[0];if(t&&t.tdList)return t.tdList.length+1}return 1},selectedRowIndex:function(){return this.tableEx.tbodyEx?this.tableEx.tbodyEx.selectedRowIndex:-1}},methods:{delRow:function(){1==this.tableEx.tbodyEx.trList.length?this.$emit("delRow",-1):(this.$emit("delRow",this.selectedRowIndex),this.tableEx.tbodyEx.selectedRow=null)}}},G=q,X=(n("OJ4k"),Object(c["a"])(G,Q,z,!1,null,null,null)),Y=X.exports,Z={install:function(t){t.component("td-ex",L),t.component("tr-ex",$),t.component("tbody-ex",S),t.component("thead-ex",M),t.component("table-ex",U),t.component("tfoot-ex",Y)}};i["a"].config.productionTip=!1,i["a"].use(Z),new i["a"]({render:function(t){return t(b)}}).$mount("#app")},h1lh:function(t,e,n){},oOwC:function(t,e,n){},sLf9:function(t,e,n){"use strict";var i=n("Eo/v"),s=n.n(i);s.a},u8SE:function(t,e,n){"use strict";var i=n("Ie4s"),s=n.n(i);s.a}});
//# sourceMappingURL=app.9487fde3.js.map